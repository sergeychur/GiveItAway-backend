
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swagger UI</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.2.2/swagger-ui.css" >
  <style>
    html
    {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *,
    *:before,
    *:after
    {
      box-sizing: inherit;
    }
    body {
      margin:0;
      background: #fafafa;
    }
  </style>
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.2.2/swagger-ui-bundle.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.2.2/swagger-ui-standalone-preset.js"> </script>
<script>
window.onload = function() {
  var spec = {"swagger": "2.0", "info": {"description": "API for GiveItAway vk mini app", "version": "1.0.0", "title": "\u041e\u0442\u0434\u0430\u0439 \u0434\u0430\u0440\u043e\u043c"}, "basePath": "/api", "tags": [{"name": "ad", "description": "\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f"}, {"name": "comment", "description": "\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u043a \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f\u043c"}, {"name": "donat", "description": "\u041f\u043e\u0436\u0435\u0440\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f"}, {"name": "deal", "description": "\u0421\u0434\u0435\u043b\u043a\u0430 \u043f\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044e"}], "schemes": ["https", "http"], "paths": {"/ad/create": {"post": {"tags": ["ad"], "summary": "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435", "description": "", "operationId": "addAd", "consumes": ["application/json"], "produces": ["application/json"], "parameters": [{"in": "body", "name": "body", "description": "\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435", "required": true, "schema": {"$ref": "#/definitions/Ad"}}], "responses": {"401": {"description": "trying to create ad without auth"}, "201": {"description": "Ad created", "schema": {"$ref": "#/definitions/AdCreationResult"}}, "400": {"description": "Invalid input"}}}}, "/ad/{ad_id}/edit": {"put": {"tags": ["ad"], "summary": "\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435", "description": "", "operationId": "updateAd", "consumes": ["application/json"], "produces": ["application/json"], "parameters": [{"in": "body", "name": "body", "description": "Ad object to modify", "required": true, "schema": {"$ref": "#/definitions/Ad"}}, {"in": "path", "name": "ad_id", "required": true, "type": "integer"}], "responses": {"403": {"description": "trying to edit not user's ad"}, "401": {"description": "no auth"}, "400": {"description": "Invalid ID supplied"}, "404": {"description": "Ad not found"}, "200": {"description": "Modification succeeded"}}}}, "/ad/{ad_id}/details": {"get": {"tags": ["ad"], "produces": ["application/json"], "parameters": [{"in": "path", "name": "ad_id", "type": "integer", "required": true, "description": "The id of required ad"}], "summary": "\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435", "responses": {"404": {"description": "Ad doesn't exist"}, "200": {"description": "The details of ad", "schema": {"$ref": "#/definitions/Ad"}}}}}, "/ad/find": {"get": {"tags": ["ad"], "summary": "\u041d\u0430\u0439\u0442\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f", "operationId": "findAds", "produces": ["application/json"], "parameters": [{"name": "category", "in": "query", "type": "string", "description": "Category where to search"}, {"name": "author_id", "in": "query", "type": "string", "description": "Ads of some user"}, {"name": "region", "in": "query", "type": "string", "description": "Region where to search"}, {"name": "district", "in": "query", "type": "string", "description": "District where to search"}, {"name": "query", "in": "query", "type": "string", "description": "Query"}, {"name": "page", "in": "query", "type": "string", "description": "page for pagination", "required": true}, {"name": "rows_per_page", "in": "query", "type": "string", "description": "rows per page for pagination", "required": true}], "responses": {"200": {"description": "found smth", "schema": {"type": "array", "items": {"$ref": "#/definitions/Ad"}}}, "400": {"description": "Invalid parameters"}, "404": {"description": "Found nothing"}}}}, "/ad/{ad_id}/upload_image": {"post": {"tags": ["ad"], "summary": "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e \u043a \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044e", "operationId": "AdImage", "consumes": ["multipart/form-data"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "additionalMetadata", "in": "formData", "description": "Additional data to pass to server", "required": false, "type": "string"}, {"name": "file", "in": "formData", "description": "file to upload", "required": false, "type": "file"}], "responses": {"200": {"description": "OK"}, "403": {"description": "trying to edit not user's ad"}, "401": {"description": "no auth"}, "400": {"description": "Error in the path"}, "500": {"description": "Error while uploading the file"}}}}, "/ad/{ad_id}/subscribe": {"put": {"summary": "\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 (\u0431\u044b\u0442\u044c \u0441\u0440\u0435\u0434\u0438 \u0442\u0435\u0445, \u043a\u0442\u043e \u0445\u043e\u0447\u0435\u0442 \u0437\u0430\u0431\u0440\u0430\u0442\u044c)", "tags": ["ad"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "user_id", "schema": {"type": "integer"}, "in": "body", "description": "User ID of suscriber, mb passed in some other way"}], "responses": {"200": {"description": "user subscribed to ad"}, "404": {"description": "ad not found"}, "403": {"description": "user id is the same as author's"}, "401": {"description": "no auth"}}}}, "/ad/{ad_id}/subscribers": {"get": {"summary": "\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0432\u0448\u0438\u0445\u0441\u044f \u043d\u0430 \u043e\u0431\u044a\u0432\u043b\u0435\u043d\u0438e", "tags": ["ad"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}], "responses": {"200": {"description": "users found"}, "404": {"description": "ad or subscribers are not found"}}}}, "/ad/{ad_id}/unsubscribe": {"post": {"summary": "\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f", "tags": ["ad"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "user_id", "schema": {"type": "integer"}, "in": "body", "description": "User ID of suscriber, mb passed in some other way"}], "responses": {"200": {"description": "user unsubscribed from ad"}, "404": {"description": "ad not found"}, "403": {"description": "user wasn't subscribed"}, "401": {"description": "no auth"}}}}, "/ad/{ad_id}/close": {"post": {"summary": "\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 \u0441\u0434\u0435\u043b\u043a\u0438", "tags": ["ad"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "user_id", "schema": {"type": "integer"}, "in": "body", "description": "User ID of suscriber, mb passed in some other way"}], "responses": {"200": {"description": "ad closed"}, "404": {"description": "ad not found"}, "403": {"description": "no user id or it doesn't match with authors"}}}}, "/ad/{ad_id}/make_deal": {"post": {"summary": "\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0434\u0435\u043b\u043a\u0443 \u043e\u0431 \u043e\u0442\u0434\u0430\u0447\u0435 \u0442\u043e\u0432\u0430\u0440\u0430", "tags": ["ad"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "deal_details", "schema": {"$ref": "#/definitions/DealDetails"}, "in": "body", "description": "Author ID and subscriber id"}], "responses": {"201": {"description": "deal created"}, "404": {"description": "ad not found"}, "403": {"description": "author id doesn't match with authors"}, "409": {"description": "no subscriber id in subscribers list"}, "401": {"description": "no auth"}}}}, "/ad/{ad_id}/deal": {"get": {"summary": "\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u0434\u0435\u043b\u043a\u0438, \u0430\u0441\u0441\u043e\u0446\u0438\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441 \u044d\u0442\u0438\u043c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u043c", "tags": ["deal"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}], "responses": {"200": {"description": "there is a pending deal", "schema": {"$ref": "#/definitions/DealDetails"}}, "404": {"description": "no pending deal for ad"}}}}, "/ad/{ad_id}/comments": {"get": {"tags": ["comment"], "summary": "\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u044b \u043a \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044e", "operationId": "listComments", "produces": ["application/json"], "parameters": [{"name": "ad_id", "in": "path", "required": true, "type": "integer"}, {"name": "page", "in": "query", "type": "string", "description": "page for pagination", "required": true}, {"name": "rows_per_page", "in": "query", "type": "string", "description": "rows per page for pagination", "required": true}], "responses": {"200": {"description": "comments found", "schema": {"type": "array", "items": {"$ref": "#/definitions/CommentForUser"}}}, "400": {"description": "Invalid parameters"}, "404": {"description": "Found nothing"}}}, "post": {"tags": ["comment"], "summary": "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439", "description": "", "operationId": "addComment", "consumes": ["application/json"], "produces": ["application/json"], "parameters": [{"in": "body", "name": "body", "description": "\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439", "required": true, "schema": {"$ref": "#/definitions/Comment"}}, {"in": "path", "name": "ad_id", "type": "integer", "required": true}], "responses": {"201": {"description": "Comment created"}, "400": {"description": "Invalid input"}, "401": {"description": "no auth"}}}}, "/comment/{comment_id}": {"put": {"tags": ["comment"], "summary": "\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f", "parameters": [{"in": "path", "name": "comment_id", "required": true, "type": "integer"}, {"in": "body", "name": "body", "description": "\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439", "required": true, "schema": {"$ref": "#/definitions/Comment"}}], "responses": {"200": {"description": "comment updated"}, "404": {"description": "no comment to update"}, "403": {"description": "wrong user"}, "401": {"description": "no auth"}}}}, "/deal/{deal_id}/cancel": {"post": {"tags": ["deal"], "summary": "\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0434\u0435\u043b\u043a\u0443. \u0415\u0441\u043b\u0438 id - id \u0430\u0432\u0442\u043e\u0440\u0430 \u0438\u043b\u0438 id - id \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430", "parameters": [{"name": "deal_id", "type": "integer", "in": "path", "required": true}], "responses": {"200": {"description": "success"}, "404": {"description": "no such deal"}, "403": {"description": "user cannot change this deal"}, "401": {"description": "no auth"}}}}, "/deal/{deal_id}/fulfill": {"post": {"tags": ["deal"], "summary": "\u041f\u043e\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u0441\u0434\u0435\u043b\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u043f\u043e\u043c\u0435\u0442\u043a\u0438 \u043e\u0442 \u0430\u0432\u0442\u043e\u0440\u0430 \u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0443\u0441\u043f\u0435\u0445\u0430", "parameters": [{"name": "deal_id", "type": "integer", "in": "path", "required": true}], "responses": {"200": {"description": "success"}, "404": {"description": "no such deal"}, "403": {"description": "user cannot change this deal"}, "401": {"description": "no auth"}}}}, "/donat/create": {"post": {"tags": ["donat"], "summary": "\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0446\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0434\u0435\u043d\u0435\u0433", "parameters": [{"name": "donat", "in": "body", "schema": {"$ref": "#/definitions/DonationRequest"}}], "responses": {"201": {"description": "created"}, "400": {"description": "some errors in request parameters"}, "401": {"description": "no auth"}}}}, "/donat/{donat_id}/close": {"post": {"tags": ["donat"], "summary": "\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u0431\u043e\u0440 \u0441\u0440\u0435\u0434\u0441\u0442\u0432", "parameters": [{"name": "donat_id", "in": "path", "required": true, "type": "integer"}], "responses": {"200": {"description": "success"}, "404": {"description": "no such donation"}, "403": {"description": "not an author of donation, cannot close"}, "401": {"description": "no auth"}}}}, "/donat/donate": {"post": {"tags": ["donat"], "summary": "\u041f\u043e\u0436\u0435\u0440\u0442\u0432\u043e\u0432\u0430\u0442\u044c", "parameters": [{"name": "donat", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Donation"}}], "responses": {"200": {"description": "success"}, "404": {"description": "no such donation"}, "401": {"description": "no auth"}}}}, "/donat/find": {"get": {"tags": ["donat"], "summary": "\u0438\u0441\u043a\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u043f\u043e\u0436\u0435\u0440\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435", "operationId": "findDonationRequests", "produces": ["application/json"], "parameters": [{"name": "category", "in": "query", "type": "string", "description": "Category where to search"}, {"name": "region", "in": "query", "type": "string", "description": "Region where to search"}, {"name": "district", "in": "query", "type": "string", "description": "District where to search"}, {"name": "query", "in": "query", "type": "string", "description": "Query"}, {"name": "page", "in": "query", "type": "string", "description": "page for pagination", "required": true}, {"name": "rows_per_page", "in": "query", "type": "string", "description": "rows per page for pagination", "required": true}], "responses": {"200": {"description": "found smth", "schema": {"type": "array", "items": {"$ref": "#/definitions/DonationRequest"}}}, "400": {"description": "Invalid parameters"}, "404": {"description": "Found nothing"}}}}, "/user/{vk_id}": {"get": {"tags": ["user"], "summary": "\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435", "description": "", "operationId": "getUserByName", "produces": ["application/json"], "parameters": [{"name": "vk_id", "in": "path", "description": "The name that needs to be fetched. Use user1 for testing. ", "required": true, "type": "string"}], "responses": {"200": {"description": "successful operation", "schema": {"$ref": "#/definitions/User"}}, "400": {"description": "Invalid username supplied"}, "404": {"description": "User not found"}}}}, "/user/auth": {"post": {"tags": ["user"], "summary": "\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043e\u043d \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0437\u0443 \u043d\u0435 \u0437\u0430\u0445\u043e\u0434\u0438\u043b \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435)", "parameters": [{"name": "auth_info", "in": "body", "schema": {"$ref": "#/definitions/AuthInfo"}}], "responses": {"201": {"description": "new app user created", "schema": {"$ref": "#/definitions/User"}}, "200": {"description": "user found", "schema": {"$ref": "#/definitions/User"}}, "401": {"description": "data is invalid, though unauthorized"}}}}}, "definitions": {"User": {"type": "object", "properties": {"vk_id": {"type": "integer", "format": "int64"}, "carma": {"type": "integer"}, "name": {"type": "string"}, "surname": {"type": "string"}, "photo_url": {"type": "string"}}}, "AuthInfo": {"type": "object", "properties": {"url": {"type": "string"}, "name": {"type": "string"}, "surname": {"type": "string"}, "photo_url": {"type": "string"}}}, "Comment": {"type": "object", "properties": {"comment_id": {"type": "integer"}, "author_id": {"type": "integer"}, "text": {"type": "string"}}}, "CommentForUser": {"type": "object", "properties": {"comment_id": {"type": "integer"}, "author": {"$ref": "#/definitions/User"}, "text": {"type": "string"}}}, "DealDetails": {"type": "object", "properties": {"deal_id": {"type": "integer"}, "ad_id": {"type": "integer"}, "author_id": {"type": "integer"}, "subscriber_id": {"type": "string"}, "status": {"type": "string", "enum": ["open", "submitted_by_one", "success", "failed"], "default": "open"}}}, "DonationRequest": {"type": "object", "properties": {"donation_id": {"type": "integer"}, "author_id": {"type": "integer"}, "sum_needed": {"type": "integer"}, "expire_date": {"type": "string"}, "status": {"type": "string", "enum": ["open", "closed"], "default": "closed"}, "description": {"type": "string"}}}, "Donation": {"type": "object", "properties": {"user_id": {"type": "integer"}, "donat_id": {"type": "integer"}, "region": {"type": "string"}, "district": {"type": "string"}, "sum": {"type": "integer"}, "category": {"type": "string"}}}, "Ad": {"type": "object", "properties": {"ad_id": {"type": "integer", "format": "int64"}, "author_id": {"type": "integer"}, "header": {"type": "string"}, "text": {"type": "string"}, "region": {"type": "string"}, "district": {"type": "string"}, "is_auction": {"type": "boolean"}, "feedback_type": {"type": "string", "enum": ["ls", "comments", "other"]}, "extra_field": {"type": "string"}, "creation_date": {"type": "string", "example": "20-JUN-1990 08:03:00"}, "geo_position": {"$ref": "#/definitions/GeoPosition"}, "status": {"type": "string", "enum": ["offer", "chosen", "closed"], "default": "offer"}, "pathes_to_photo": {"type": "array", "items": {"type": "string"}, "example": ["/photo1", "/photo2"]}, "category": {"type": "string"}, "comments_count": {"type": "integer"}}}, "GeoPosition": {"type": "object", "properties": {"available": {"type": "boolean"}, "long": {"type": "number"}, "lat": {"type": "number"}}}, "AdCreationResult": {"type": "object", "properties": {"ad_id": {"type": "integer"}}}}};
  // Build a system
  const ui = SwaggerUIBundle({
    spec: spec,
    dom_id: '#swagger-ui',
    deepLinking: true,
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  })
  window.ui = ui
}
</script>
</body>
</html>
